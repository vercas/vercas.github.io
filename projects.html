---
layout: default
title: Projects
permalink: /projects/
---

<div class="projects">
	{% for project in site.projects %}
		<div class="panel panel-default">
			<div class="panel-heading"><a href="{{ site.baseurl }}{{ project.url }}">{{ project.title }}</a></div>
			<div class="panel-body">
				<p>{{ project.description }}</p>
			</div>

			{% if project.repo %}
				<ul class="list-group" data-repo-name="{{ project.repo }}">
					<li class="list-group-item repo-link-item"><a href="https://github.com/{{ project.repo }}">GitHub repository</a></li>
					<li class="list-group-item">
						<span class="stars"># stargazers</span>,
						<span class="watchers"># watchers</span>,
						<span class="forks"># forks</span>,
						<span class="issues"># issue{s</span>.
					</li>
				</ul>
			{% endif %}
		</div>
	{% endfor %}
</div>

{% comment %}
{% for repo in site.github.public_repositories %}
	<div class="panel panel-default">
		<div class="panel-heading"><a href="{{ repo.html_url }}">{{ repo.name }}</a></div>
		<div class="panel-body">
			<p>{{ repo.description }}</p>
		</div>

		<ul class="list-group">
			<li class="list-group-item">Last update: {{ repo.updated_at }}</li>
			<li class="list-group-item">{{ repo.stargazers_count }} stargazer{% if repo.stargazers_count != 1 %}s{% endif %}, {{ repo.watchers_count }} watcher{% if repo.watchers_count != 1 %}s{% endif %}.</li>
			<li class="list-group-item">Morbi leo risus</li>
			<li class="list-group-item">Porta ac consectetur ac</li>
			<li class="list-group-item">Vestibulum at eros</li>
		</ul>
	</div>
{% endfor %}
{% endcomment %}

<script>
function countNoun(cnt, nounSing, nounPlur)
{
	if (cnt == 1)
		return "1 " + nounSing;
	else if (nounPlur)
		return cnt + " " + nounPlur;
	else
		return cnt + " " + nounSing + "s"
}

$(document).ready(function() {
	$("[data-repo-name]").each(function() {
		var $el = $(this)
		var name = $el.data("repoName")

		var $repoLinkItem = $el.find(".repo-link-item")
		var $stars = $el.find(".stars")
		var $watchers = $el.find(".watchers")
		var $forks = $el.find(".forks")
		var $issues = $el.find(".issues")

		$.ajax({
			url: "https://api.github.com/repos/" + name,
			success: function(dat)
			{
				$repoLinkItem.append('<span class="badge last-update">Last update: ' + dat.updated_at + '</span>');

				$stars.text(countNoun(dat.stargazers_count, 'stargazer'));
				$stars.text(countNoun(dat.watchers_count,   'watcher'));
				$stars.text(countNoun(dat.forks_count, 'fork'));
				$stars.text(countNoun(dat.open_issues_count, 'issue'));
			},
			dataType: "json"
		});
	});
});
</script>
